{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nvar KEY_CART_ITEMS = \"cartItems\";\nvar getCartItems = function () {\n  var _ref = _asyncToGenerator(function* () {\n    try {\n      var storedCartItems = yield AsyncStorage.getItem(KEY_CART_ITEMS);\n      return storedCartItems ? JSON.parse(storedCartItems) : [];\n    } catch (error) {\n      console.error(\"Error loading cart items:\", error);\n      return [];\n    }\n  });\n  return function getCartItems() {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar saveCartItems = function () {\n  var _ref2 = _asyncToGenerator(function* (cartItems) {\n    try {\n      yield AsyncStorage.setItem(KEY_CART_ITEMS, JSON.stringify(cartItems));\n    } catch (error) {\n      console.error(\"Error saving cart items:\", error);\n    }\n  });\n  return function saveCartItems(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar addToCart = function () {\n  var _ref3 = _asyncToGenerator(function* (productId, quantity, price) {\n    console.log(productId);\n    try {\n      var cartItems = yield getCartItems();\n      var existingItemIndex = cartItems.findIndex(function (cartItem) {\n        return cartItem.id === productId;\n      });\n      if (existingItemIndex !== -1) {\n        var updatedCartItems = _toConsumableArray(cartItems);\n        updatedCartItems[existingItemIndex].count += quantity;\n        yield saveCartItems(updatedCartItems);\n      } else {\n        var _updatedCartItems = [].concat(_toConsumableArray(cartItems), [{\n          id: productId,\n          count: quantity,\n          price: price\n        }]);\n        yield saveCartItems(_updatedCartItems);\n      }\n    } catch (error) {\n      console.error(\"Error adding to cart:\", error);\n    }\n  });\n  return function addToCart(_x2, _x3, _x4) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar removeFromCart = function () {\n  var _ref4 = _asyncToGenerator(function* (productId) {\n    try {\n      var cartItems = yield getCartItems();\n      var updatedCartItems = cartItems.filter(function (item) {\n        return item.id !== productId;\n      });\n      yield saveCartItems(updatedCartItems);\n    } catch (error) {\n      console.error(\"Error removing from cart:\", error);\n    }\n  });\n  return function removeFromCart(_x5) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nvar increaseCount = function () {\n  var _ref5 = _asyncToGenerator(function* (productId) {\n    try {\n      var cartItems = yield getCartItems();\n      var updatedCartItems = cartItems.map(function (item) {\n        return item.id === productId ? _objectSpread(_objectSpread({}, item), {}, {\n          count: item.count + 1\n        }) : item;\n      });\n      yield saveCartItems(updatedCartItems);\n    } catch (error) {\n      console.error(\"Error increasing count:\", error);\n    }\n  });\n  return function increaseCount(_x6) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nvar decreaseCount = function () {\n  var _ref6 = _asyncToGenerator(function* (productId) {\n    try {\n      var cartItems = yield getCartItems();\n      var updatedCartItems = cartItems.map(function (item) {\n        return item.id === productId ? _objectSpread(_objectSpread({}, item), {}, {\n          count: Math.max(0, item.count - 1)\n        }) : item;\n      });\n      var filteredCartItems = updatedCartItems.filter(function (item) {\n        return item.count > 0;\n      });\n      yield saveCartItems(filteredCartItems);\n    } catch (error) {\n      console.error(\"Error decreasing count:\", error);\n    }\n  });\n  return function decreaseCount(_x7) {\n    return _ref6.apply(this, arguments);\n  };\n}();\nexport { addToCart, removeFromCart, increaseCount, decreaseCount, getCartItems };","map":{"version":3,"names":["AsyncStorage","KEY_CART_ITEMS","getCartItems","_ref","_asyncToGenerator","storedCartItems","getItem","JSON","parse","error","console","apply","arguments","saveCartItems","_ref2","cartItems","setItem","stringify","_x","addToCart","_ref3","productId","quantity","price","log","existingItemIndex","findIndex","cartItem","id","updatedCartItems","_toConsumableArray","count","concat","_x2","_x3","_x4","removeFromCart","_ref4","filter","item","_x5","increaseCount","_ref5","map","_objectSpread","_x6","decreaseCount","_ref6","Math","max","filteredCartItems","_x7"],"sources":["D:/TranDinhKhang/Example01/src/Cart/cartSlice.js"],"sourcesContent":["import AsyncStorage from \"@react-native-async-storage/async-storage\";\r\n\r\nconst KEY_CART_ITEMS = \"cartItems\";\r\n\r\nconst getCartItems = async () => {\r\n  try {\r\n    const storedCartItems = await AsyncStorage.getItem(KEY_CART_ITEMS);\r\n    return storedCartItems ? JSON.parse(storedCartItems) : [];\r\n  } catch (error) {\r\n    console.error(\"Error loading cart items:\", error);\r\n    return [];\r\n  }\r\n};\r\n\r\nconst saveCartItems = async (cartItems) => {\r\n  try {\r\n    await AsyncStorage.setItem(KEY_CART_ITEMS, JSON.stringify(cartItems));\r\n  } catch (error) {\r\n    console.error(\"Error saving cart items:\", error);\r\n  }\r\n};\r\n\r\nconst addToCart = async (productId, quantity, price) => {\r\n  console.log(productId);\r\n  try {\r\n    const cartItems = await getCartItems();\r\n    const existingItemIndex = cartItems.findIndex(\r\n      (cartItem) => cartItem.id === productId\r\n    );\r\n    if (existingItemIndex !== -1) {\r\n      const updatedCartItems = [...cartItems];\r\n      updatedCartItems[existingItemIndex].count += quantity;\r\n      await saveCartItems(updatedCartItems);\r\n    } else {\r\n      const updatedCartItems = [\r\n        ...cartItems,\r\n        { id: productId, count: quantity, price },\r\n      ];\r\n      await saveCartItems(updatedCartItems);\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error adding to cart:\", error);\r\n  }\r\n};\r\n\r\nconst removeFromCart = async (productId) => {\r\n  try {\r\n    const cartItems = await getCartItems();\r\n    const updatedCartItems = cartItems.filter((item) => item.id !== productId);\r\n    await saveCartItems(updatedCartItems);\r\n  } catch (error) {\r\n    console.error(\"Error removing from cart:\", error);\r\n  }\r\n};\r\n\r\nconst increaseCount = async (productId) => {\r\n  try {\r\n    const cartItems = await getCartItems();\r\n    const updatedCartItems = cartItems.map((item) =>\r\n      item.id === productId ? { ...item, count: item.count + 1 } : item\r\n    );\r\n    await saveCartItems(updatedCartItems);\r\n  } catch (error) {\r\n    console.error(\"Error increasing count:\", error);\r\n  }\r\n};\r\n\r\nconst decreaseCount = async (productId) => {\r\n  try {\r\n    const cartItems = await getCartItems();\r\n    const updatedCartItems = cartItems.map((item) =>\r\n      item.id === productId\r\n        ? { ...item, count: Math.max(0, item.count - 1) }\r\n        : item\r\n    );\r\n    const filteredCartItems = updatedCartItems.filter((item) => item.count > 0);\r\n    await saveCartItems(filteredCartItems);\r\n  } catch (error) {\r\n    console.error(\"Error decreasing count:\", error);\r\n  }\r\n};\r\n\r\nexport {\r\n  addToCart,\r\n  removeFromCart,\r\n  increaseCount,\r\n  decreaseCount,\r\n  getCartItems,\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}